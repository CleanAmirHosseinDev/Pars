$(document).ready(function () {

    var customAvatarHTML = function (params) {
        return "<span class='avatar'><img src='" + params.data.avatar + "' height='32' width='32'></span>" + params.value
    }
    // ag-grid
    /*** COLUMN DEFINE ***/


    // users language select
    if ($("#users-language-select2").length > 0) {
        $("#users-language-select2").select2({
            dropdownAutoWidth: true,
            width: '100%'
        });
    }
    // users music select
    if ($("#users-music-select2").length > 0) {
        $("#users-music-select2").select2({
            dropdownAutoWidth: true,
            width: '100%'
        });
    }
    // users movies select
    if ($("#users-movies-select2").length > 0) {
        $("#users-movies-select2").select2({
            dropdownAutoWidth: true,
            width: '100%'
        });
    }
    // users birthdate date
    if ($(".birthdate-picker").length > 0) {
        $('.birthdate-picker').pickadate({
            format: 'mmmm, d, yyyy'
        });
    }

    if (true) {

        AjaxCall('/api/admin/Users/Get_Userss/',

            JSON.stringify(
                {
                    'PageIndex': 1,
                    'PageSize': 100
                    
                        
                })
            , 'POST').done(function (response) {
                if (response.isSuccess === true) {
                    /*var obj = JSON.parse(response.data);*/
                    var tempData = [];
                    //map
                    response.data.forEach(function (item, i) {
                        tempData.push({ "id": item.id, "username": item.user.userName, "email": item.user.email, "mobile": item.user.mobile, "status": item.user.status === true ? "فعال" : "غیر فعال"});
                    });
                    
                    var columnDefs = [{
                        headerName: 'شناسه',
                        field: 'id',
                        width: 200,
                        filter: true,
                        /* checkboxSelection: true,
                         headerCheckboxSelectionFilteredOnly: true,
                         headerCheckboxSelection: true,*/
                       
                    },
                    {
                        headerName: 'نام کاربری',
                        field: 'username',
                        filter: true,
                        width: 200,
                        //cellRenderer: customAvatarHTML,
                    },
                    {
                        headerName: 'ایمیل',
                        field: 'email',
                        filter: true,
                        width: 200,
                    },
                    {
                        headerName: 'موبایل',
                        field: 'mobile',
                        filter: true,
                        width: 200,
                    },
                    {
                        headerName: 'وضعیت',
                        field: 'status',
                        filter: true,
                        width: 200,
                    },
                    {
                        headerName: 'عملیات',
                        field: 'setting_',
                        filter: true,
                        width: 200,
                        cellRenderer: function (params) {
                            
                            return '<div class="d-flex justify-content-center"><a href="#" style="font-size: 26px;" class="nav-link" data-id="' + params.data.id + '" data-email="' + 2 + '"  data-fullName="' + 3 + '" data-phoneNumber="' + 4 + '" data-confirmCodeStatus="' + 5 + '" onclick="myFunction($(this))"  > <i class="ficon feather icon-check-square"></i></a> </div>';
                        }
                    }
                    ];


                    fillGrid(tempData, columnDefs, columnCountShow = 10, nameGrid = "myGrid");
                }
                else {
                    Swal.fire({
                        title: "خطا!",
                        text: response.message,
                        type: "error",
                        confirmButtonClass: 'btn btn-primary',
                        buttonsStyling: false,
                    }).then(function () {
                        $('.logoff').click();
                    });


                }
            }).fail(function (error) {

                Swal.fire({
                    title: "خطا!",
                    text: "خطای غیر منتظره!",
                    type: "error",
                    confirmButtonClass: 'btn btn-primary',
                    buttonsStyling: false,
                }).then(function () {
                    $('.logoff').click();
                });
            });
    }

  
});
myFunction = function (e) {

    alert("به نام خداوند بخشنده مهربان" + e.data("id"));
}