(function(n,t){function u(n){n.keyCode==13&&t(`button[title='جستجو']`).click()}function f(n){t(n).attr("disabled","");RemoveAllCharForPrice("AmountOsLastSales");AjaxCallActionPostSaveFormWithUploadFile("/api/customer/Customers/Save_BasicInformationCustomers",fill_AjaxCallActionPostSaveFormWithUploadFile("frmFormMain"),!0,function(i){t(n).removeAttr("disabled");i.isSuccess?goToUrl("/Customer/Customer/EditCustomer"):(t("#AmountOsLastSales").val(moneyCommaSepWithReturn(t("#AmountOsLastSales").val())),alertB("خطا",i.message,"error"))},!0)}function i(n,i){AjaxCallAction("POST","/api/customer/SystemSeting/Get_SystemSetings",JSON.stringify({ParentCodeArr:"63,27,56",PageIndex:0,PageSize:0}),!0,function(r){var u;if(r.isSuccess){var f='<option value="">انتخاب کنید<\/option>',e='<option value="">انتخاب کنید<\/option>',o='<option value="">انتخاب کنید<\/option>';for(u=0;u<r.data.length;u++)r.data[u].parentCode==56?e+=" <option value="+r.data[u].systemSetingId+">"+r.data[u].label+"<\/option>":r.data[u].parentCode==63?o+=" <option value="+r.data[u].systemSetingId+">"+r.data[u].label+"<\/option>":r.data[u].parentCode==27&&(f+=" <option value="+r.data[u].systemSetingId+">"+r.data[u].label+"<\/option>");t("#KindOfCompanyId").html(f);t("#HowGetKnowCompanyId").html(e);t("#HowGetKnowCompanyId").val(n.howGetKnowCompanyId);t("#KindOfCompanyId").val(n.kindOfCompanyId);i&&(t("#TypeServiceRequestedId").html(o),t("#TypeServiceRequestedId").val("66"))}},!0)}function r(n){Web.RequestForRating.RegistingFirstRequest(function(r){r.isSuccess&&(r.data.length>0?(t("#divTypeServiceRequestedId").hide(),i(n,!1)):(t("#divTypeServiceRequestedId").show(),i(n,!0)))})}function e(n="rtl"){ComboBoxWithSearch(".select2",n);AjaxCallAction("GET","/api/customer/Customers/Get_Customers/",null,!0,function(n){n!=null&&(t("#AddressCompany").val(n.addressCompany),t("#CompanyName").val(n.companyName),t("#CeoName").val(n.ceoName),t("#EconomicCode").val(n.economicCode),t("#NationalCode").val(n.nationalCode),t("#CeoNationalCode").val(n.ceoNationalCode),t("#CeoMobile").val(n.ceoMobile),t("#AgentMobile").val(n.agentMobile),t("#AgentName").val(n.agentName),t("#NamesAuthorizedSignatories").val(n.namesAuthorizedSignatories),t("#CountOfPersonal").val(n.countOfPersonal),t("#Email").val(n.email),t("#Tel").val(n.tel),t("#PostalCode").val(n.postalCode),t("#AmountOsLastSales").val(moneyCommaSepWithReturn(isEmpty(n.amountOsLastSales)?"":n.amountOsLastSales.toString())),t("#divDownload").html("<a href='/File/Download?path="+n.lastInsuranceListFull+"' target='_blank'><i class='fa fa-download'><\/i>&nbsp;دانلود<\/a>"),t("#divDownload_AuditedFinancialStatements").html("<a href='/File/Download?path="+n.auditedFinancialStatementsFull+"' target='_blank'><i class='fa fa-download'><\/i>&nbsp;دانلود<\/a>"),r(n))},!0)}n.Customer={TextSearchOnKeyDown:u,SaveCustomer:f,InitCustomer:e,SystemSeting_Combo:i,CheckForFirstRequest:r}})(Web,jQuery),function(n,t){function i(){dellstor("token");dellstor("fullName");dellstor("customerID");dellstor("userID");dellstor("loginName");goToUrl("/Account/Login")}function r(){isEmpty(getlstor("token"))?goToUrl("/Account/Login"):t(".fullNameInLayout").html(getlstor("fullName"))}n.Layout={SignOutForExitToLogin:i,InitLayout:r}}(Web,jQuery),function(n,t){function e(n){n.keyCode==13&&t(`button[title='جستجو']`).click()}function o(){AjaxCallAction("POST","/api/customer/RequestForRating/Get_RequestForRatings",JSON.stringify({Search:t("#txtSearch").val(),PageIndex:1,PageSize:t("#cboSelectCount").val()}),!0,function(n){var r,i;if(n.isSuccess){for(r="",i=0;i<n.data.length;i++)r+="<tr><td>"+(i+1)+"<\/td><td>"+n.data[i].kindOfRequestName+"<\/td><td>"+n.data[i].dateOfRequestStr+"<\/td><td>"+n.data[i].levelStepStatus+"<\/td><td><a style='margin-right:5px' href='/Customer/RequestForRating/RequestReferences?id="+n.data[i].requestId+"' class='btn btn-info fontForAllPage'> <img src='/css/GlobalAreas/dist/img/timeline-icon.png' style='width:20px' title=' مشاهده گردش کار' /><\/a>",getlstor("loginName")===n.data[i].destLevelStepAccessRole&&(r+="<a style='margin-right:5px' title='ارجاع' class='btn btn-info fontForAllPage' href='/Customer/RequestForRating/Referral/"+n.data[i].requestId+"'> <i class='fa fa-mail-forward' style='color:black'><\/i><\/a>"),r+="<\/td><\/tr>";t("#tBodyList").html(r)}},!0)}function s(n=null){var t=!1;return AjaxCallAction("POST","/api/customer/RequestForRating/Get_RequestForRatings",JSON.stringify({Search:null,PageIndex:1,PageSize:1,RequestId:n}),!0,function(n){if(n.isSuccess)for(var i=0;i<n.data.length;i++)n.data[i].isFinished&&(t=!0)},!1),t}function h(n=null){AjaxCallAction("POST","/api/customer/RequestForRating/Get_RequestForRatings",JSON.stringify({Search:null,PageIndex:1,PageSize:1}),!0,function(t){n==null?t.isSuccess&&t.data.length==0&&goToUrl("/Customer/Customer/EditCustomer"):n(t)},!1)}function c(n=null){try{AjaxCallAction("GET","/api/customer/RequestForRating/InitReferral/"+n,null,!0,function(i){getU("/css/GlobalAreas/Views/Customer/RequestForRating/P_Referral.html",function(r){var f,u;if(InitModal_Withot_Par("مشاهده جزییات",r,"",!0,"width:100%;"),t("#sdklsslks3498sjdkxhjsd_823sb").val(encrypt(n.toString(),keyMaker())),i.isSuccess){for(f="<div class='form-group'><label for='ReferralExplanation'>توضیح ارجاع<\/label><textarea class='form-control' id='ReferralExplanation' rows='5'><\/textarea><\/div>",u=0;u<i.data.length;u++)f+="<button type='button' class='btn btn-warning ButtonOpperationLSSlss' onclick='Web.RequestForRating.SaveReferralRequestForRating(this);' data-DLSI='"+encrypt(i.data[u].destLevelStepIndex,keyMaker())+"' data-LSAR='"+encrypt(i.data[u].levelStepAccessRole,keyMaker())+"' data-LSS='"+encrypt(i.data[u].levelStepStatus,keyMaker())+"'>"+i.data[u].destLevelStepIndexButton+"<\/button>";t("#bLLSS").html(f)}else t("#bLLSS").html("")})},!0)}catch(i){}}function l(n){t(n).attr("disabled","");AjaxCallAction("POST","/api/customer/RequestForRating/Save_Request",JSON.stringify({Request:{KindOfRequest:isEmpty(t("#TypeServiceRequestedId").val())?null:t("#TypeServiceRequestedId").val()}}),!0,function(i){t(n).removeAttr("disabled");i.isSuccess?goToUrl("/Customer/RequestForRating/Index"):alertB("هشدار",i.message,"warning")},!0)}function r(){AjaxCallAction("POST","/api/customer/SystemSeting/Get_SystemSetings",JSON.stringify({ParentCodeArr:"63",PageIndex:0,PageSize:0}),!0,function(n){var r,i;if(n.isSuccess){for(r='<option value="">انتخاب کنید<\/option>',i=0;i<n.data.length;i++)r+=" <option value="+n.data[i].systemSetingId+">"+n.data[i].label+"<\/option>";t("#TypeServiceRequestedId").html(r)}},!0)}function a(){ComboBoxWithSearch(".select2","dir");r()}function v(n=null){AjaxCallAction("POST","/api/customer/RequestForRating/Get_RequestForRatings",JSON.stringify({Search:null,PageIndex:1,PageSize:1,RequestId:n}),!0,function(t){if(t.isSuccess)for(var r=0;r<t.data.length;r++)t.data[r].isFinished?i(n,!0):i(n,!1)},!0)}function i(n=null,i){AjaxCallAction("POST","/api/customer/RequestForRating/Get_RequestReferencessService",JSON.stringify({RequestId:n}),!0,function(n){var r,f,u,e;if(n!=null){for(r="",f=!1,u=0;u<n.data.length;u++)(n.data[u].levelStepAccessRole=="10"||n.data[u].sendUser==null)&&(e=u==0?"bg-secondary":"bg-info",r+="<article class='timeline-entry "+(f?" left-aligned":"")+"'>",r+="<div class='timeline-entry-inner'>",r+="<time class='timeline-time' datetime=''>",r+="<span class='date'>"+n.data[u].sendTimeStr+"<\/span>",r+="<span class='LTRDirection'>"+n.data[u].sendTimeTimeStr+"<\/span>",r+="<\/time>",r+="<div class='timeline-icon "+e+"'>",r+="<i class='entypo-feather'><\/i>",r+="<\/div>",r+="<div class='timeline-label'>",u==0?(r+="<h2>",r+="<span>ایجاد درخواست توسط : <\/span>",r+="<span class='sender'>"+n.data[u].agentName+" ("+n.data[u].roleDesc+") <\/span >",r+="<\/h2>",r+="<ul>",r+="<li>",r+="<span class='smallFontSize'> ["+n.data[u].levelStepStatus+"]<\/span>",r+="<\/li>",r+="<\/ul>"):(n.data[u].sendUser==null||(r+="<span>"+n.data[u].userRoleDes+": <\/span>",r+="<span class='sender'>"+n.data[u].realName+"<\/span>"),r+="<br/>",r+="<ul>",r+="<li>",r+="<span class='smallFontSize'>",r+="["+n.data[u].levelStepStatus+"]",r+="<\/span>",r+="<\/li>",r+="<\/ul>"),r+="<span><\/span>",u==0?(r+="<div class='customDiv'>",r+="<span class='Transcript'>"+n.data[u].kindOfRequestName+"<\/span>",r+="<\/div>"):n.data[u].comment!=null&&(r+="<div class='customDiv'>توضیحات<hr/>",r+="<span class='Transcript'>"+n.data[u].comment+"<\/span>",r+="<\/div>"),r+="<\/div>",r+="<\/div>",r+="<\/article>",f=!f);i?(r+="<article class='timeline-entry "+(f?" left-aligned":"")+"'>",r+="<div class='timeline-entry-inner'>",r+="<time class='timeline-time' datetime='2014-01-10T03:45'><span>اختتام درخواست<\/span><\/time>",r+="<div class='timeline-icon bg-secondary'><i class='entypo-feather'><\/i><\/div>",r+="<div class='timeline-label'>",r+="<h2>",r+="<span>اختتام درخواست <\/span>",r+="<\/h2>",r+="<\/div>",r+="<\/article>"):(r+="<article class='timeline-entry begin'>",r+="<div class='timeline-entry-inner'>",r+="<div class='timeline-icon' style='-webkit-transform: rotate(-90deg); -moz-transform: rotate(-90deg);'>",r+="<i class='entypo-flight'><\/i>",r+="<\/div>",r+="<\/div>",r+="<\/article>");t("#TimeLine").html(r)}},!0)}function y(n=null){AjaxCallAction("GET","/api/Customer/RequestForRating/InitReferral/"+n,null,!0,function(i){i.isSuccess?getU("/css/GlobalAreas/Views/Customer/RequestForRating/P_Referral.html",function(r){var f,u;for(t("#divMAS").html(r),t("#sdklsslks3498sjdkxhjsd_823sa").val(encrypt(n.toString(),keyMaker())),t("#phch").show(),f="",u=0;u<i.data.length;u++)f+="<button type='button' style='margin:5px' class='btn btn-info ButtonOpperationLSSlss' onclick='Web.RequestForRating.SaveReferralRequestForRating(this);' data-DLSI='"+encrypt(i.data[u].destLevelStepIndex,keyMaker())+"' data-LSAR='"+encrypt(i.data[u].levelStepAccessRole,keyMaker())+"' data-LSS='"+encrypt(i.data[u].levelStepStatus,keyMaker())+"' data-SC='"+encrypt(i.data[u].smsContent,keyMaker())+"' data-ST='"+encrypt(i.data[u].smsType,keyMaker())+"' data-DLSIB='"+encrypt(i.data[u].destLevelStepIndexButton,keyMaker())+"'>"+i.data[u].destLevelStepIndexButton+"<\/button>";t("#bLLSS").html(f);Ckeditor("ReferralExplanation")}):(t("#divMAS").html("<div class='alert alert-error text-center' style='font-size: 20px;'>شما اجازه انجام این عملیات را ندارید<\/div>"),t("#phch").hide(),t("#sdklsslks3498sjdkxhjsd_823sa").val(encrypt("0",keyMaker())),t("#bLLSS").html(""),Ckeditor("ReferralExplanation"))},!0)}function u(n=null){isEmpty(n)||n==0||AjaxCallAction("POST","/api/customer/RequestForRating/Get_RequestForRatings",JSON.stringify({RequestId:n,Search:null,PageIndex:1,PageSize:1}),!0,function(n){n.isSuccess&&getU("/css/GlobalAreas/Views/customer/RequestForRating/P_Contract.html",function(i){t("#contractInfo").html(i);for(var r=0;r<n.data.length;r++)f(n.data[r].kindOfRequest)})},!0)}function f(n=null){isEmpty(n)||n==0||AjaxCallAction("POST","/api/customer/Contract/Get_Contracts/",JSON.stringify({KinfOfRequest:n,Search:null,PageIndex:1,PageSize:1}),!0,function(n){if(n.isSuccess)for(var i=0;i<n.data.length;i++)t("#ContractText").val(n.data[0].contractText),Ckeditor("ContractText")},!0)}function p(){u(decrypt(t("#sdklsslks3498sjdkxhjsd_823sa").val(),keyMaker()))}function w(n){t(".ButtonOpperationLSSlss").attr("disabled","");var i={};i.DestLevelStepIndex=decrypt(t(n).attr("data-DLSI"),keyMaker());i.Comment=getDataCkeditor("ReferralExplanation");i.LevelStepAccessRole=decrypt(t(n).attr("data-LSAR"),keyMaker());i.LevelStepStatus=decrypt(t(n).attr("data-LSS"),keyMaker());i.Request={};i.Request.Requestid=decrypt(t("#sdklsslks3498sjdkxhjsd_823sa").val(),keyMaker());i.Request.KindOfRequest="0";i.SmsContent=decrypt(t(n).attr("data-SC"),keyMaker());i.SmsType=isEmpty(decrypt(t(n).attr("data-ST"),keyMaker()))?null:decrypt(t(n).attr("data-ST"),keyMaker());i.DestLevelStepIndexButton=decrypt(t(n).attr("data-DLSIB"),keyMaker());AjaxCallAction("POST","/api/customer/RequestForRating/Save_Request",JSON.stringify(i),!0,function(n){t(".ButtonOpperationLSSlss").removeAttr("disabled");n.isSuccess?goToUrl("/Customer/RequestForRating/Index"):alertB("هشدار",n.message,"warning")},!0)}n.RequestForRating={TextSearchOnKeyDown:e,SaveRequestForRating:l,InitRequestForRating:a,FilterGrid:o,Get_Detail:c,SystemSeting_ComboRequestForRating:r,SaveReferralRequestForRating:w,RegistingFirstRequest:h,InitRequestReferences:v,InitReferral:y,CheckIsfinish:s,CreateTimeLine:i,InitContract:f,GetContractInfo:u,ShowContract:p}}(Web,jQuery),function(n,t){function i(n=null,i=null,r=""){AjaxCallAction("POST","/api/customer/SystemSeting/Get_SystemSetings",JSON.stringify({ParentCodeArr:n,LabeCode:i,PageIndex:0,PageSize:0}),!0,function(n){var u,i;if(n.isSuccess){for(u='<option value="">انتخاب کنید<\/option>',i=0;i<n.data.length;i++)u+=" <option value="+n.data[i].systemSetingId+">"+n.data[i].value+"<\/option>";t("#"+r).html(u)}},!0)}n.SystemSeting={SystemSeting_Combo:i}}(Web,jQuery),function(n,t){function a(n){n.keyCode==13&&t(`button[title='جستجو']`).click()}function s(n=null){switch(n){case 1:r(1,"1,2,7,8");break;case 2:r(3,"1,2,3");break;case 3:i(6);r(16,"1,2,3");r(17,"1,2");break;case 4:i(11);break;case 5:r(13,"1,2,3");break;case 7:i(7);i(18);i(19);i(20);case 9:r(9,"1,2");r(10,"1,2");break;case 14:r(24,"1,2");i(21);h(21);i(23);h(23)}}function c(n="rtl"){ComboBoxWithSearch(".select2",n);AjaxCallAction("POST","/api/customer/SystemSeting/Get_SystemSetings",JSON.stringify({ParentCodeArr:"5,9,20,30,125",PageIndex:0,PageSize:0}),!0,function(n){var i;if(n.isSuccess){var r='<option value="">انتخاب کنید<\/option>',u='<option value="">انتخاب کنید<\/option>',f='<option value="">انتخاب کنید<\/option>',e="",o="";for(i=0;i<n.data.length;i++)n.data[i].parentCode==5?r+=" <option value="+n.data[i].systemSetingId+">"+n.data[i].label+"<\/option>":n.data[i].parentCode==9?u+=" <option value="+n.data[i].systemSetingId+">"+n.data[i].label+"<\/option>":n.data[i].parentCode==20?f+=" <option value="+n.data[i].systemSetingId+">"+n.data[i].label+"<\/option>":n.data[i].parentCode==30?e+=" <tr><td> <div class='form-group'><label class='control-label col-md-4' for=''>"+n.data[i].label+"<span class='RequiredLabel'>*<\/span><\/label><div class='col-md-8'><input type='file'  class='form-control'/><\/div><\/div><\/td> <td><a href='#'>مشاهده <\/a><\/td><\/tr>":n.data[i].parentCode==125&&(o+=" <tr><td> <div class='form-group'><label class='control-label col-md-4' for=''>"+n.data[i].label+"<span class='RequiredLabel'>*<\/span><\/label><div class='col-md-8'><input type='file'  class='form-control'/><\/div><\/div><\/td> <td><a href='#'>مشاهده <\/a><\/td><\/tr>");t("#MemberPostID").html(r);t("#MemberEductionID").html(u);t("#UniversityID").html(f);t("#CompanyDocument").html(e);t("#OtherDocument").html(o)}},!0)}function v(n="rtl"){s(1);ComboBoxWithSearch(".select2","dir");c(n)}function r(n=null,t=null){i(n);l(n,t)}function i(n=null){AjaxCallAction("POST","/api/customer/FurtherInfo/Get_DataFormQuestionss",JSON.stringify({DataFormId:n,PageIndex:0,PageSize:0}),!0,function(i){var u,r;if(i.isSuccess){for(u="",r=0;r<i.data.length;r++)r==0?u+="<div class='col-lg-6'>":r==Math.round(i.data.length/2)&&i.data.length>1&&(u+="<\/div><div class='col-lg-6'>"),u+="<div class='form-group'><div class='col-md-12' style='margin-bottom:10px'><label class='control-label'  for=''>"+i.data[r].questionText+"<span class='RequiredLabel'>*<\/span><\/label>",u+=i.data[r].questionType=="select"?"<select name='"+i.data[r].questionName+"' id='"+i.data[r].questionName+"' class='form-control select2' ><\/select>":i.data[r].questionType=="textarea"?"<textarea name='"+i.data[r].questionName+"' id='"+i.data[r].questionName+"' class='form-control' ><\/textarea>":i.data[r].questionType=="checkbox"?"<input type='"+i.data[r].questionType+"' name='"+i.data[r].questionName+"' id='"+i.data[r].questionName+"' style='text-align:right; width: 30px' />":"<input type='"+i.data[r].questionType+"' name='"+i.data[r].questionName+"' id='"+i.data[r].questionName+"' placeholder='"+i.data[r].questionText+"' class='form-control' />",u+="<\/div>",u+="<\/div>",r==i.data.length&&i.data.length>1&&(u+="<\/div>");t("#FormDetail"+n).html(u)}},!0)}function h(n=null){AjaxCallAction("POST","/api/customer/FurtherInfo/Get_DataFromAnswerss",JSON.stringify({FormId:n,PageIndex:0,PageSize:0}),!0,function(i){var r;if(i.isSuccess)if(n==14)for(r=0;r<i.data.length;r++)t("#IsPublicActivityFile").popover(i.data[0].answer);else if(n==21)for(r=0;r<i.data.length;r++)t("#Investment").val(i.data[0].answer);else if(n==23)for(r=0;r<i.data.length;r++)t("#EmploymentDisabled").val(i.data[0].answer)},!0)}function l(n=null,i=null){AjaxCallAction("POST","/api/customer/FurtherInfo/Get_DataFormAnswerTabless",JSON.stringify({FormId:n,PageIndex:0,PageSize:0}),!0,function(r){var f,u;if(r.isSuccess){f=i.split(",");let e="";for(let n=0;n<r.data.length;n++){for(e+="<tr><td>"+(n+1)+"<\/td><td>",u=0;u<f.length;u++)switch(f[u]){case"1":e+=r.data[n].answer1+"<\/td><td>";break;case"2":e+=r.data[n].answer2+"<\/td><td>";break;case"3":e+=r.data[n].answer3+"<\/td><td>";break;case"4":e+=r.data[n].answer4+"<\/td><td>";break;case"5":e+=r.data[n].answer5+"<\/td><td>";break;case"6":e+=r.data[n].answer6+"<\/td><td>";break;case"7":e+=r.data[n].answer7+"<\/td><td>";break;case"8":e+=r.data[n].answer8+"<\/td><td>";break;case"9":e+=r.data[n].answer6+"<\/td><td>";break;case"10":e+=r.data[n].answer6+"<\/td><td>"}e+="<a title='ویرایش' href='/Customer/FurtherInfo/EditAnswerTableId?id="+r.data[n].answerTableId+"' class='btn btn-edit fontForAllPage'><i class='fa fa-edit'><\/i><\/a><\/td><\/tr>"}t("#FormDetailAnswer"+n).html(e)}},!0)}var u,f,o,e;t(".next").click(function(){var n=Number(t("#FormLoadCode").val())+1;t("#FormLoadCode").val(n);s(n);u=t(this).parent();f=t(this).parent().next();t("#progressbar li").eq(t("fieldset").index(f)).addClass("active");f.show();u.animate({opacity:0},{step:function(n){e=1-n;u.css({display:"none",position:"relative"});f.css({opacity:e})},duration:600})});t(".previous").click(function(){var n=Number(t("#FormLoadCode").val())-1;t("#FormLoadCode").val(n);u=t(this).parent();o=t(this).parent().prev();t("#progressbar li").eq(t("fieldset").index(u)).removeClass("active");o.show();u.animate({opacity:0},{step:function(n){e=1-n;u.css({display:"none",position:"relative"});o.css({opacity:e})},duration:600})});t(".radio-group .radio").click(function(){t(this).parent().find(".radio").removeClass("selected");t(this).addClass("selected")});t(".submit").click(function(){return!1});n.FurtherInfo={TextSearchOnKeyDown:a,InitFurtherInfo:v,SystemSeting_Combo:c,IntiForm:i,IntiFormAnswer:l,IntiFormShow:r,IntiTab:s,IntiFormSingelAnswer:h}}(Web,jQuery);