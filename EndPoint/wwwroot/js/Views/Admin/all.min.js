(function(n,t){function i(){dellstor("token");dellstor("menu");dellstor("fullName");dellstor("userID");goToUrl("/Account/LoginA")}function r(){var n,i,u,r,f;if(isEmpty(getlstor("token")))goToUrl("/Account/LoginA");else{if(t(".fullNameInLayout").html(getlstor("fullName")),n=JSON.parse(getlstor("menu")),i="<li><a href='/'><img src='/css/GlobalAreas/dist/img/Logo/hnet.com-image.png' class='' style='width: 20px; height: 20px;' /> <span>سامانه پارس کیان<\/span><\/a><\/li><li class='active'><a href='/Admin'><i class='fa fa-dashboard'><\/i> <span>داشبورد<\/span><\/a><\/li>",n!=null&&n.length>0)for(n=n.filter(n=>n.link!=""),u=groupBy(n,"labelGroup"),r=0;r<u.length;r++)i+="<li class='treeview'><a href='#'><i class='"+u[r][1][0].icon+"'><\/i> <span>"+u[r][0]+"<\/span><span class='pull-left-container'><i class='fa fa-angle-right pull-left'><\/i><\/span><\/a><ul class='treeview-menu'>",f=n.filter(n=>n.labelGroup==u[r][0]),f.forEach(function(n){i+="<li><a href='"+n.link+"'><i class='fa fa-plus'><\/i>"+n.group_Item+"<\/a><\/li>"}),i+="<\/ul><\/li>";i+="<li><a href='' onclick='Web.Layout.SignOutForExitToLogin();'><i class='fa fa-sign-out'><\/i> <span>خروج<\/span><\/a><\/li>";t("#ulMenuMain").html(i)}}n.Layout={SignOutForExitToLogin:i,InitLayout:r}})(Web,jQuery),function(n,t){function r(n){n.keyCode==13&&t(`button[title='جستجو']`).click()}function u(){AjaxCallAction("POST","/api/admin/City/Get_Citys",JSON.stringify({Search:t("#txtSearch").val(),PageIndex:1,PageSize:t("#cboSelectCount").val()}),!0,function(n){var r,i;if(n.isSuccess){for(r="",i=0;i<n.data.length;i++)r+="<tr><td>"+(i+1)+"<\/td><td>"+n.data[i].state.stateName+"<\/td><td>"+n.data[i].cityName+"<\/td><td><a title='ویرایش' href='/Admin/City/EditCity?id="+n.data[i].cityId+"' class='btn btn-edit fontForAllPage'><i class='fa fa-edit'><\/i><\/a><\/td><\/tr>";t("#tBodyList").html(r)}},!0)}function i(){AjaxCallAction("POST","/api/admin/City/Get_States_Combo",JSON.stringify({PageIndex:0,PageSize:0}),!0,function(n){var r,i;if(n.isSuccess){for(r="",i=0;i<n.data.length;i++)r+=" <option value="+n.data[i].stateId+">"+n.data[i].stateName+"<\/option>";t("#StateId").html(r)}},!0)}function f(n){t(n).attr("disabled","");AjaxCallAction("POST","/api/admin/City/Save_City",JSON.stringify({CityName:t("#CityName").val(),CityId:t("#CityId").val(),StateId:t("#StateId").val()}),!0,function(i){t(n).removeAttr("disabled");i.isSuccess?goToUrl("/Admin/City/Index"):alertB("خطا",i.message,"error")},!0)}function e(n=null,r="rtl"){ComboBoxWithSearch(".select2",r);isEmpty(n)||n==0||AjaxCallAction("GET","/api/admin/City/Get_City/"+n,null,!0,function(n){n!=null&&(i(),t("#CityId").val(n.cityId),t("#CityName").val(n.cityName),t("#StateId").val(n.stateId),comboBoxWithSearchUpdateText("StateId",n.state.stateName))},!0)}n.City={TextSearchOnKeyDown:r,FilterGrid:u,SaveCity:f,InitCity:e,GetStatesList:i}}(Web,jQuery),function(n,t){function i(n){n.keyCode==13&&t(`button[title='جستجو']`).click()}function r(){AjaxCallAction("POST","/api/admin/State/Get_States",JSON.stringify({Search:t("#txtSearch").val(),PageIndex:1,PageSize:t("#cboSelectCount").val()}),!0,function(n){var r,i;if(n.isSuccess){for(r="",i=0;i<n.data.length;i++)r+="<tr><td>"+(i+1)+"<\/td><td>"+n.data[i].stateName+"<\/td><td><a title='ویرایش' href='/Admin/State/EditState?id="+n.data[i].stateId+"' class='btn btn-edit fontForAllPage'><i class='fa fa-edit'><\/i><\/a><\/td><\/tr>";t("#tBodyList").html(r)}},!0)}function u(n){t(n).attr("disabled","");AjaxCallAction("POST","/api/admin/State/Save_State",JSON.stringify({StateName:t("#StateName").val(),StateId:t("#StateId").val()}),!0,function(i){t(n).removeAttr("disabled");i.isSuccess?goToUrl("/Admin/State/Index"):alertB("خطا",i.message,"error")},!0)}function f(n=null){isEmpty(n)||n==0||AjaxCallAction("GET","/api/admin/State/Get_State/"+n,null,!0,function(n){n!=null&&(t("#StateId").val(n.stateId),t("#StateName").val(n.stateName))},!0)}n.State={TextSearchOnKeyDown:i,FilterGrid:r,SaveState:u,InitState:f}}(Web,jQuery),function(n,t){function u(n){n.keyCode==13&&t(`button[title='جستجو']`).click()}function f(){AjaxCallAction("POST","/api/admin/SystemSeting/Get_SystemSetings",JSON.stringify({ParentCode:isEmpty(t("#SystemSetingID").val())?null:t("#SystemSetingID").val(),Search:t("#txtSearch").val(),PageIndex:1,PageSize:t("#cboSelectCount").val()}),!0,function(n){var r,i;if(n.isSuccess){for(r="",i=0;i<n.data.length;i++)r+="<tr><td>"+(i+1)+"<\/td><td>"+n.data[i].label+"<\/td><td><a title='ویرایش' href='/Admin/SystemSeting/EditSystemSeting?id="+n.data[i].systemSetingId+"' class='btn btn-edit fontForAllPage'><i class='fa fa-edit'><\/i><\/a><\/td><\/tr>";t("#tBodyList").html(r)}},!0)}function e(n=null){i("ParentCode");isEmpty(n)||n==0||AjaxCallAction("GET","/api/admin/SystemSeting/Get_SystemSeting/"+n,null,!0,function(n){n!=null&&(t("#SystemSetingID").val(n.systemSetingId),t("#Label").val(n.label),t("#ParentCode").val(n.parentCode),comboBoxWithSearchUpdateText("ParentCode",n.parenLabel),r("SubCodes",n.systemSetingId))},!0)}function i(n){ComboBoxWithSearch(".select2","rtl");AjaxCallAction("POST","/api/admin/SystemSeting/Get_SystemSetings",JSON.stringify({ParentCode:null,PageIndex:0,PageSize:0}),!0,function(i){var u,r;if(i.isSuccess){for(u='<option value="">انتخاب کنید<\/option>',r=0;r<i.data.length;r++)i.data[r].parentCode==null&&(u+=" <option value="+i.data[r].systemSetingId+">"+i.data[r].label+"<\/option>");t("#"+n).html(u)}},!0)}function r(n,i=null){ComboBoxWithSearch(".select2","rtl");AjaxCallAction("POST","/api/admin/SystemSeting/Get_SystemSetings",JSON.stringify({ParentCode:i,PageIndex:0,PageSize:0}),!0,function(i){var u,r;if(i.isSuccess){for(u="",r=0;r<i.data.length;r++)u+=" <option value="+i.data[r].systemSetingId+">"+i.data[r].label+"<\/option>";t("#"+n).html(u)}},!0)}function o(n){t(n).attr("disabled","");AjaxCallAction("POST","/api/admin/SystemSeting/Save_SystemSeting",JSON.stringify({NewLabel:t("#NewLabel").val(),SystemSetingID:t("#SystemSetingID").val(),Label:t("#Label").val(),ParentCode:t("#ParentCode").val()}),!0,function(i){if(t(n).removeAttr("disabled"),i.isSuccess){var r=new Option(t("#NewLabel").val(),"");t(r).html(t("#NewLabel").val());t("#SubCodes").append(r);t("#NewLabel").val("")}else alertB("خطا",i.message,"error")},!0)}n.SystemSeting={TextSearchOnKeyDown:u,FilterGrid:f,InitSystemSeting:e,SystemSetingList:i,SaveSystemSeting:o,SystemSetingListSub:r}}(Web,jQuery),function(n,t){function u(n){n.keyCode==13&&t(`button[title='جستجو']`).click()}function f(){AjaxCallAction("POST","/api/admin/Users/Get_Userss",JSON.stringify({Search:t("#txtSearch").val(),PageIndex:1,PageSize:t("#cboSelectCount").val()}),!0,function(n){var r,i;if(n.isSuccess){for(r="",i=0;i<n.data.length;i++)r+=n.data[i].user.userName=="svisor"||n.data[i].user.userName=="admin"||n.data[i].role.roleDesc=="مشتری"?"<tr><td>"+(i+1)+"<\/td><td>"+n.data[i].user.realName+"<\/td><td>"+n.data[i].user.userName+"<\/td><td>"+n.data[i].role.roleDesc+"<\/td><td>"+(n.data[i].user.status==!0?"فعال":"غیر فعال")+"<\/td><td>"+n.data[i].user.mobile+"<\/td><td><a title='ویرایش' href='/Admin/Users/EditUser?id="+n.data[i].userId+"' class='btn btn-edit fontForAllPage'><i class='fa fa-edit'><\/i><\/a><\/td><\/tr>":"<tr><td>"+(i+1)+"<\/td><td>"+n.data[i].user.realName+"<\/td><td>"+n.data[i].user.userName+"<\/td><td>"+n.data[i].role.roleDesc+"<\/td><td>"+(n.data[i].user.status==!0?"فعال":"غیر فعال")+"<\/td><td>"+n.data[i].user.mobile+"<\/td><td><a title='ویرایش' href='/Admin/Users/EditUser?id="+n.data[i].userId+"' class='btn btn-edit fontForAllPage'><i class='fa fa-edit'><\/i><\/a><a style='margin-right:5px' titel='تنظیمات دسترسی کاربر' href='/Admin/Users/EditUserAccessLevel?id="+n.data[i].userId+"' class='btn btn-info fontForAllPage'><i class='fa fa-cog'><\/i><\/a><\/td><\/tr>";t("#tBodyList").html(r)}},!0)}function e(n){t(n).attr("disabled","");let i=null;i=t("#Status").is(":checked")?!0:!1;AjaxCallAction("POST","/api/admin/Users/Save_Users",JSON.stringify({Id:t("#Id").val(),RoleId:t("#RoleId").val(),UserID:t("#UserId").val(),User:{RealName:t("#RealName").val(),UserName:t("#UserName").val(),Password:t("#Password").val(),Mobile:t("#Mobile").val(),Email:t("#Email").val(),Status:i}}),!0,function(i){t(n).removeAttr("disabled");i.isSuccess?goToUrl("/Admin/Users/Index"):alertB("خطا",i.message,"error")},!0)}function o(n){try{t(n).attr("disabled","");var i=[];t('select[name="SuperVisorRoles_Arr[]"] option:selected').each(function(){i.push(t(this).val())});AjaxCallAction("POST","/api/admin/Users/Save_AccessLevels",JSON.stringify({Roles:i.join(","),UserId:t("#UserId").val()}),!0,function(i){t(n).removeAttr("disabled");i.isSuccess?goToUrl("/Admin/Users/Index"):alertB("خطا",i.message,"error")},!0)}catch(n){}}function r(){AjaxCallAction("POST","/api/admin/Users/Get_Roles_Combo",JSON.stringify({PageIndex:0,PageSize:0}),!0,function(n){var r,i;if(n.isSuccess){for(r="",i=0;i<n.data.length;i++)r+=" <option value="+n.data[i].roleId+">"+n.data[i].roleDesc+"<\/option>";t("#RoleId").html(r)}},!0)}function s(n=null,u="rtl"){r();isEmpty(n)||n==0||AjaxCallAction("GET","/api/admin/Users/Get_Users/"+n,null,!0,function(r){r!=null&&(t("#Id").val(r.id),t("#UserId").val(r.userId),t("#RoleId").val(r.roleId),comboBoxWithSearchUpdateText("RoleId",r.role.roleDesc),t("#RealName").val(r.user.realName),t("#UserName").val(r.user.userName),t("#Mobile").val(r.user.mobile),t("#Email").val(r.user.email),t("#Status").prop("checked",r.user.status),i(n,u))},!0)}function h(n=null,r="rtl"){isEmpty(n)||n==0||AjaxCallAction("GET","/api/admin/Users/Get_Users/"+n,null,!0,function(u){u!=null&&(t("#Id").val(u.id),t("#UserId").val(u.userId),t("#RoleId").val(u.roleId),t("#RealName").val(u.user.realName),i(n,r))},!0)}function i(n=null,i){isEmpty(n)||n==0||AjaxCallAction("GET","/api/admin/Users/GetAccessLevels/"+n,null,!0,function(n){var r="<div class='container mt-3'><div id='accordion'>",o,s,f,u,e;if(n!=null&&n.length>0)for(o=groupBy(n,"labelGroup"),s=0;s<o.length;s++){for(r+="<div class='col-md-12'>",r+="<div class='card'><div class='card-header'><a class='collapsed btn' data-bs-toggle='collapse' href='#Collaps"+o.length+"'><i class='fa fa-plus-square-o' aria-hidden='true'><\/i>&nbsp;&nbsp;"+o[s][0]+"<\/a><\/div>",r+="<div id='Collaps"+o.length+"' class='collapse' data-bs-parent='#accordion'><div class='card-body'>",f=groupBy(n,"group_Item"),u=0;u<f.length;u++){for(r+="<div class='col-md-4'>",r+="<div class='panel panel-primary'>",r+="<div class='panel-heading'>"+f[u][1][0].group_Item+"<\/div>",r+="<div class='panel-body' style='height:100px;overflow-y:scroll;'>",r+="<select multiple='multiple' class='multi-select' id='SuperVisorRoles_Arr' name='SuperVisorRoles_Arr[]'>",e=0;e<f[u][1].length;e++)r+="<option id='"+f[u][1][e].value+"' value='"+f[u][1][e].value+"'"+(f[u][1][e].selected?"selected":"")+">"+f[u][1][e].text+"<\/option>";r+="<\/select>";r+="<\/div>";r+="<\/div>";r+="<\/div>"}r+="<\/div>";r+="<\/div>";r+="<\/div>"}r+="<\/div><\/div>";t("#AccessPanel").html(r);ComboBoxWithSearch(".select2",i);MultiSelect(".multi-select")},!0)}n.Users={TextSearchOnKeyDown:u,FilterGrid:f,SaveUser:e,Get_Roles_Combo:r,InitUser:s,GetGetAccessLevels:i,SaveUserAccessLevel:o,InitUserAccessLevel:h}}(Web,jQuery);