(function(n,t){function i(){dellstor("token");dellstor("fullName");dellstor("userID");dellstor("loginName");dellstor("menu");goToUrl("/Account/LoginUser")}function r(){isEmpty(getlstor("token"))?goToUrl("/Account/LoginUser"):t(".fullNameInLayout").html(getlstor("fullName"))}n.Layout={SignOutForExitToLogin:i,InitLayout:r}})(Web,jQuery),function(n,t){function s(n){n.keyCode==13&&t(`button[title='جستجو']`).click()}function h(){AjaxCallAction("POST","/api/superVisor/RequestForRating/Get_RequestForRatings",JSON.stringify({Search:t("#txtSearch").val(),PageIndex:1,PageSize:t("#cboSelectCount").val()}),!0,function(n){var r,i;if(n.isSuccess){for(r="",i=0;i<n.data.length;i++)r+="<tr><td>"+(i+1)+"<\/td><td>"+n.data[i].requestNo+"<\/td><td>"+n.data[i].agentName+"<\/td><td>"+n.data[i].agentMobile+"<\/td><td>"+n.data[i].levelStepStatus+"<\/td><td><a style='margin-right:5px' href='/superVisor/RequestForRating/RequestReferences?id="+n.data[i].requestId+"' class='btn btn-info fontForAllPage'> <img src='/css/GlobalAreas/dist/img/timeline-icon.png' style='width:20px' title=' مشاهده گردش کار' /><\/a>"+(getlstor("loginName")===n.data[i].destLevelStepAccessRole?"<a style='margin-right:5px' title='ارجاع' class='btn btn-info fontForAllPage' href='/SuperVisor/RequestForRating/Referral/"+n.data[i].requestId+"'> <i class='fa fa-mail-forward' style='color:black'><\/i><\/a>":"")+"<\/td><\/tr>";t("#tBodyList").html(r)}},!0)}function c(n=null){AjaxCallAction("GET","/api/superVisor/RequestForRating/InitReferral/"+n,null,!0,function(i){i.isSuccess?getU("/css/GlobalAreas/Views/SuperVisor/RequestForRating/P_Referral.html",function(u){var e,f;for(t("#divMAS").html(u),t("#sdklsslks3498sjdkxhjsd_823sa").val(encrypt(n.toString(),keyMaker())),t("#phch").show(),e="",f=0;f<i.data.length;f++)e+="<button type='button' style='margin:5px' class='btn btn-info ButtonOpperationLSSlss' onclick='Web.RequestForRating.SaveRequestForRating(this);' data-DLSI='"+encrypt(i.data[f].destLevelStepIndex,keyMaker())+"' data-LSAR='"+encrypt(i.data[f].levelStepAccessRole,keyMaker())+"' data-LSS='"+encrypt(i.data[f].levelStepStatus,keyMaker())+"' data-SC='"+encrypt(i.data[f].smsContent,keyMaker())+"' data-ST='"+encrypt(i.data[f].smsType,keyMaker())+"' data-DLSIB='"+encrypt(i.data[f].destLevelStepIndexButton,keyMaker())+"'>"+i.data[f].destLevelStepIndexButton+"<\/button>";t("#bLLSS").html(e);Ckeditor("ReferralExplanation");r()}):(t("#divMAS").html("<div class='alert alert-error text-center' style='font-size: 20px;'>"+(isEmpty(i.message)?"شما اجازه انجام این عملیات را ندارید":i.message)+"<\/div>"),t("#phch").hide(),t("#sdklsslks3498sjdkxhjsd_823sa").val(encrypt("0",keyMaker())),t("#bLLSS").html(""),Ckeditor("ReferralExplanation"))},!0)}function r(){u()}function l(){f()}function u(){var n=decrypt(t("#sdklsslks3498sjdkxhjsd_823sa").val(),keyMaker());isEmpty(n)||n==0||AjaxCallAction("POST","/api/superVisor/RequestForRating/Get_RequestForRatings",JSON.stringify({RequestId:n,Search:null,PageIndex:1,PageSize:1}),!0,function(n){n.isSuccess&&getU("/css/GlobalAreas/Views/SuperVisor/RequestForRating/P_Customer.html",function(i){t("#customerInfo").html(i);for(var r=0;r<n.data.length;r++)e(n.data[r].customerId)})},!0)}function f(){var n=decrypt(t("#sdklsslks3498sjdkxhjsd_823sa").val(),keyMaker());isEmpty(n)||n==0||AjaxCallAction("POST","/api/superVisor/RequestForRating/Get_RequestForRatings",JSON.stringify({RequestId:n,Search:null,PageIndex:1,PageSize:1}),!0,function(n){n.isSuccess&&getU("/css/GlobalAreas/Views/SuperVisor/RequestForRating/P_Contract.html",function(i){t("#contractInfo").html(i);for(var r=0;r<n.data.length;r++)o(n.data[r].kindOfRequest)})},!0)}function e(n=null){isEmpty(n)||n==0||AjaxCallAction("GET","/api/superVisor/Customers/Get_Customers/"+(isEmpty(n)?"0":n),null,!0,function(n){n!=null&&(t("#AddressCompany").val(n.addressCompany),t("#CompanyName").val(n.companyName),t("#CeoName").val(n.ceoName),t("#EconomicCode").val(n.economicCode),t("#NationalCode").val(n.nationalCode),t("#CeoNationalCode").val(n.ceoNationalCode),t("#CeoMobile").val(n.ceoMobile),t("#AgentMobile").val(n.agentMobile),t("#AgentName").val(n.agentName),t("#NamesAuthorizedSignatories").val(n.namesAuthorizedSignatories),t("#CountOfPersonal").val(n.countOfPersonal),t("#Email").val(n.email),t("#Tel").val(n.tel),t("#PostalCode").val(n.postalCode),t("#AmountOsLastSales").val(n.amountOsLastSales),t("#divDownload").html("<a href='/File/Download?path="+n.lastInsuranceListFull+"' target='_blank'><i class='fa fa-download'><\/i>&nbsp;دانلود<\/a>"),t("#divDownload_AuditedFinancialStatements").html("<a href='/File/Download?path="+n.auditedFinancialStatementsFull+"' target='_blank'><i class='fa fa-download'><\/i>&nbsp;دانلود<\/a>"),a(n))},!0)}function a(n){AjaxCallAction("POST","/api/superVisor/SystemSeting/Get_SystemSetings",JSON.stringify({ParentCodeArr:"63,27,56",PageIndex:0,PageSize:0}),!0,function(i){var r;if(i.isSuccess){var u='<option value="">انتخاب کنید<\/option>',f='<option value="">انتخاب کنید<\/option>',e='<option value="">انتخاب کنید<\/option>';for(r=0;r<i.data.length;r++)i.data[r].parentCode==56?f+=" <option value="+i.data[r].systemSetingId+">"+i.data[r].label+"<\/option>":i.data[r].parentCode==63?e+=" <option value="+i.data[r].systemSetingId+">"+i.data[r].label+"<\/option>":i.data[r].parentCode==27&&(u+=" <option value="+i.data[r].systemSetingId+">"+i.data[r].label+"<\/option>");t("#KindOfCompany").html(u);t("#HowGetKnowCompany").html(f);t("#TypeServiceRequestedId").html(e);t("#HowGetKnowCompany").val(n.howGetKnowCompanyId);t("#KindOfCompany").val(n.kindOfCompanyId);t("#TypeServiceRequestedId").val(n.typeServiceRequestedId)}},!0)}function o(n=null){isEmpty(n)||n==0||AjaxCallAction("POST","/api/superVisor/Contract/Get_Contracts/",JSON.stringify({KinfOfRequest:n,Search:null,PageIndex:1,PageSize:1}),!0,function(n){if(n.isSuccess)for(var i=0;i<n.data.length;i++)t("#ContractText").val(n.data[0].contractText),Ckeditor("ContractText")},!0)}function v(n){t(".ButtonOpperationLSSlss").attr("disabled","");var i={};i.DestLevelStepIndex=decrypt(t(n).attr("data-DLSI"),keyMaker());i.Comment=getDataCkeditor("ReferralExplanation");i.LevelStepAccessRole=decrypt(t(n).attr("data-LSAR"),keyMaker());i.LevelStepStatus=decrypt(t(n).attr("data-LSS"),keyMaker());i.Request={};i.Request.Requestid=decrypt(t("#sdklsslks3498sjdkxhjsd_823sa").val(),keyMaker());i.Request.KindOfRequest=0;i.SmsContent=decrypt(t(n).attr("data-SC"),keyMaker());i.SmsType=isEmpty(decrypt(t(n).attr("data-ST"),keyMaker()))?null:decrypt(t(n).attr("data-ST"),keyMaker());i.DestLevelStepIndexButton=decrypt(t(n).attr("data-DLSIB"),keyMaker());AjaxCallAction("POST","/api/superVisor/RequestForRating/Save_Request",JSON.stringify(i),!0,function(n){t(".ButtonOpperationLSSlss").removeAttr("disabled");n.isSuccess?goToUrl("/SuperVisor/RequestForRating/Index"):alertB("هشدار",n.message,"warning")},!0)}function i(n=null,i){AjaxCallAction("POST","/api/superVisor/RequestForRating/Get_RequestReferencessService",JSON.stringify({RequestId:n}),!0,function(n){var r,f,u,e;if(n!=null){for(r="",f=!1,u=0;u<n.data.length;u++)e=u==0?"bg-secondary":"bg-info",r+="<article class='timeline-entry "+(f?" left-aligned":"")+"'>",r+="<div class='timeline-entry-inner'>",r+="<time class='timeline-time' datetime=''>",r+="<span class='date'>"+n.data[u].sendTimeStr+"<\/span>",r+="<span class='LTRDirection'>"+n.data[u].sendTimeTimeStr+"<\/span>",r+="<\/time>",r+="<div class='timeline-icon "+e+"'>",r+="<i class='entypo-feather'><\/i>",r+="<\/div>",r+="<div class='timeline-label'>",u==0?(r+="<h2>",r+="<span>ایجاد درخواست توسط : <\/span>",r+="<span class='sender'>"+n.data[u].agentName+" ("+n.data[u].roleDesc+") <\/span >",r+="<\/h2>",r+="<ul>",r+="<li>",r+="<span class='smallFontSize'> ["+n.data[u].levelStepStatus+"]<\/span>",r+="<\/li>",r+="<\/ul>"):(n.data[u].sendUser==null||(r+="<span>"+n.data[u].userRoleDes+": <\/span>",r+="<span class='sender'>"+n.data[u].realName+"<\/span>"),r+="<br/>",r+="<ul>",r+="<li>",r+="<span class='smallFontSize'>",r+="["+n.data[u].levelStepStatus+"]",r+="<\/span>",r+="<\/li>",r+="<\/ul>"),r+="<span><\/span>",u==0?(r+="<div class='customDiv'>",r+="<span class='Transcript'>"+n.data[u].kindOfRequestName+"<\/span>",r+="<\/div>"):n.data[u].comment!=null&&(r+="<div class='customDiv'>توضیحات<hr/>",r+="<span class='Transcript'>"+n.data[u].comment+"<\/span>",r+="<\/div>"),r+="<\/div>",r+="<\/div>",r+="<\/article>",f=!f;i?(r+="<article class='timeline-entry "+(f?" left-aligned":"")+"'>",r+="<div class='timeline-entry-inner'>",r+="<time class='timeline-time' datetime='2014-01-10T03:45'><span>اختتام درخواست<\/span><\/time>",r+="<div class='timeline-icon bg-secondary'><i class='entypo-feather'><\/i><\/div>",r+="<div class='timeline-label'>",r+="<h2>",r+="<span>اختتام درخواست <\/span>",r+="<\/h2>",r+="<\/div>",r+="<\/article>"):(r+="<article class='timeline-entry begin'>",r+="<div class='timeline-entry-inner'>",r+="<div class='timeline-icon' style='-webkit-transform: rotate(-90deg); -moz-transform: rotate(-90deg);'>",r+="<i class='entypo-flight'><\/i>",r+="<\/div>",r+="<\/div>",r+="<\/article>");t("#TimeLine").html(r)}},!0)}function y(n=null){AjaxCallAction("POST","/api/superVisor/RequestForRating/Get_RequestForRatings",JSON.stringify({Search:null,PageIndex:1,PageSize:1,RequestId:n}),!0,function(t){if(t.isSuccess)for(var r=0;r<t.data.length;r++)t.data[r].isFinished?i(n,!0):i(n,!1)},!0)}n.RequestForRating={FilterGrid:h,TextSearchOnKeyDown:s,InitReferral:c,SaveRequestForRating:v,InitRequestReferences:y,ShowCustomerInfo:r,GetCustomerInfo:u,GetContractInfo:f,InitCustomer:e,ShowContract:l,InitContract:o,CreateTimeLine:i}}(Web,jQuery),function(n,t){function i(){AjaxCallAction("POST","/api/superVisor/Customers/Get_Customerss",JSON.stringify({Search:t("#txtSearch").val(),PageIndex:1,PageSize:t("#cboSelectCount").val()}),!0,function(n){var r,i;if(n.isSuccess){for(r="",i=0;i<n.data.length;i++)r+="<tr><td>"+(i+1)+"<\/td><td>"+(isEmpty(n.data[i].companyName)?"":n.data[i].companyName)+"<\/td><td>"+(isEmpty(n.data[i].agentName)?"":n.data[i].agentName)+"<\/td><td>"+(isEmpty(n.data[i].agentMobile)?"":n.data[i].agentMobile)+"<\/td><td>"+n.data[i].saveDateStr+"<\/td><td>"+(n.data[i].isProfileComplete?"ثبت درخواست":"عدم ثبت درخواست")+"<\/td><td><a title='نمایش' href='/SuperVisor/Customers/ShowCustomers?id="+n.data[i].customerId+"' class='btn btn-edit fontForAllPage'><i class='fa fa-eye'><\/i><\/a><\/td><\/tr>";t("#tBodyList").html(r)}},!0)}function r(n){AjaxCallAction("GET","/api/superVisor/Customers/Get_Customers/"+(isEmpty(n)?"0":n),null,!0,function(n){n!=null&&(t("#AddressCompany").html(n.addressCompany),t("#CompanyName").html(n.companyName),t("#CeoName").html(n.ceoName),t("#EconomicCode").html(n.economicCode),t("#NationalCode").html(n.nationalCode),t("#CeoNationalCode").html(n.ceoNationalCode),t("#CeoMobile").html(n.ceoMobile),t("#AgentMobile").html(n.agentMobile),t("#AgentName").html(n.agentName),t("#NamesAuthorizedSignatories").html(n.namesAuthorizedSignatories),t("#CountOfPersonal").html(n.countOfPersonal),t("#Email").html(n.email),t("#Tel").html(n.tel),t("#PostalCode").html(n.postalCode),t("#AmountOsLastSales").val(moneyCommaSepWithReturn(isEmpty(n.amountOsLastSales)?"":n.amountOsLastSales.toString())),t("#HowGetKnowCompanyId").html(n.howGetKnowCompany!=null?n.howGetKnowCompany.label:""),t("#KindOfCompanyId").html(n.kindOfCompany!=null?n.kindOfCompany.label:""))},!0)}n.Customer={FilterGrid:i,InitCustomer:r}}(Web,jQuery),function(n,t){function i(){AjaxCallAction("POST","/api/superVisor/Users/UpdatePass_Users",JSON.stringify({OldPassword:t("#OldPassword").val(),NewPassword:t("#NewPassword").val(),ConfirmPassword:t("#ConfirmPassword").val()}),!0,function(n){debuggerWeb();n.isSuccess?alertB("",n.message,"success"):alertB("خطا",n.message,"error")},!0)}n.Users={UpdatePass:i}}(Web,jQuery);